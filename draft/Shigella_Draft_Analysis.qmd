---
title: "Shigella Draft Analysis"
format: 
  pdf:
    number-sections: true
    number-depth: 2
    number-offset: [0, 0]
editor: visual
output:
  pdf_document:
    orientation: landscape
---

# Matching Compiled Shigella Dataset and 'Actual Day' Dataset

```{r setup, include=FALSE,echo=FALSE}
library(knitr)
knitr::opts_chunk$set(echo = TRUE)
```

```{r, echo=FALSE, message=FALSE}
library(dplyr)
library(readxl)
```



```{r, echo=FALSE, message=FALSE}
## Load compiled shigella dataset
df <- read_excel("3.8.2024 Compiled Shigella data.xlsx", 
                 sheet = "Compiled")
## Load actual day collection dataset
df2<-read_excel("Actual day of collection.xlsx", sheet ="Actual day")

```

## Checking Compiled Shigella Dataset
```{r, echo=FALSE, message=FALSE}
# select longitudinal dataset from complied dataset

df_sosar<-df%>%filter(study_name=="SOSAR")

# split the data by isotype

df_sosar_IgA<-df_sosar%>%filter(isotype_name=="IgA")## it doesn't matter with choosing isotype


# Count unique values of CaseID
unique_count <- length(unique(df_sosar$sid))

# Print the count 
print(unique_count)##  48 unique sample id with 218 observations

df_test<-df_sosar_IgA%>%select(sid,timepoint)
df_test<- df_test %>%arrange(sid) ## 218 observations 

print(df_test)
```
The compiled Shigella dataset contains 48 unique sample IDs with a total of 218 observations.



## Checking New 'Actual Day' Dataset
```{r, echo=FALSE, message=FALSE}
# Count unique values of CaseID
unique_count2 <- length(unique(df2$CaseID))

# Print the count
print(unique_count2)## 139 unique sample id with 428 observations

```

The new 'Actual Day' dataset contains 139 unique sample IDs with a total of 428 observations.

## Subsetting the New Dataset Based on the Compiled Shigella Dataset's Sample IDs

```{r, echo=FALSE, message=FALSE}
# Create a vector of unique sid values from df_test
unique_sids <- unique(df_test$sid)

# Filter df2 to include only rows where CaseID is in the unique_sids vector
filtered_df2 <- df2 %>%
  filter(CaseID %in% unique_sids)%>%select(CaseID,`Actual day`)

print(filtered_df2) ## 229 observations

```

Since the new dataset has more unique sample IDs than the compiled Shigella dataset, we filtered the new dataset to match the sample IDs in the compiled dataset. This allows for a meaningful comparison between the two datasets under the same conditions.

After filtering, the new dataset has 48 unique sample IDs with a total of 229 observations, compared to the compiled datasetâ€™s 48 unique sample IDs with 218 observations.

Therefore, we identified an 11-observation difference between the two datasets.